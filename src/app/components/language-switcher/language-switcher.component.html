<div class="dropdown" data-testid="language-switcher" #dropdownContainer>
  <button
    #dropdownButton
    class="btn btn-link dropdown-toggle language-switcher"
    type="button"
    id="languageDropdown"
    (mousedown)="onButtonMouseDown($event)"
    (click)="toggleDropdown($event)"
    [attr.aria-expanded]="isOpen()"
    data-testid="language-switcher-button"
    [attr.aria-label]="languageInfo().ariaLabel"
  >
    <span class="flag" role="img" data-testid="language-flag">{{ languageInfo().flag }}</span>
    <span class="language-code">{{ languageInfo().code }}</span>
  </button>
  <ul
    class="dropdown-menu dropdown-menu-end"
    *ngIf="isOpen()"
    [class.show]="isOpen()"
    [style.display]="isOpen() ? 'block' : null"
    aria-labelledby="languageDropdown"
    (click)="$event.stopPropagation()"
  >
    <li>
      <button
        class="dropdown-item"
        type="button"
        (click)="selectLanguage('pt-BR'); $event.stopPropagation()"
        [class.active]="currentLanguage() === 'pt-BR'"
        data-testid="lang-pt-br"
      >
        <span class="flag-icon">ğŸ‡§ğŸ‡·</span> PortuguÃªs (BR)
      </button>
    </li>
    <li>
      <button
        class="dropdown-item"
        type="button"
        (click)="selectLanguage('en-US'); $event.stopPropagation()"
        [class.active]="currentLanguage() === 'en-US'"
        data-testid="lang-en-us"
      >
        <span class="flag-icon">ğŸ‡ºğŸ‡¸</span> English (US)
      </button>
    </li>
  </ul>
</div>
